(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5433:function(e,t,n){e.exports=n(5562)},5562:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),i=n(21),s=n(22),u=n(24),l=n(23),p=n(25),m=n(26),h=n(49),f=n(5),d=n(19),b=n(76),y={yellow:{backgroundColor:"#FBC02D"},green:{backgroundColor:"#4CAF50"},lightgreen:{backgroundColor:"#8BC34A"},blue:{backgroundColor:"#0288D1"},lightblue:{backgroundColor:"#03A9F4"},orange:{backgroundColor:"#FF5722"}},g=function(e){var t=Object.keys(y),n=t.length;return t[Object(h.a)(e).reduce(function(e,t){return e+t.charCodeAt(0)},0)%n]},v=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(f.m,{elevation:1,className:e.paper},r.a.createElement(f.g,{className:e.list},this.listFavoriteItems,this.listNotFavoriteItems))}},{key:"listFavoriteItems",get:function(){var e=this;return Object.entries(this.props.favoriteRates).map(function(t){var n=t[0],a=t[1],c=e.props,o=c.classes,i=c.onToggleFavorite;return r.a.createElement(f.h,{key:n,button:!0,onClick:function(){return i(n)}},r.a.createElement(f.b,{className:o[g(n)]},n),r.a.createElement(f.j,{primary:a}),r.a.createElement(f.i,null,r.a.createElement(b.a,{color:"secondary"})))})}},{key:"listNotFavoriteItems",get:function(){var e=this;return Object.entries(this.props.notFavoriteRates).map(function(t){var n=t[0],a=t[1],c=e.props,o=c.classes,i=c.onToggleFavorite;return r.a.createElement(f.h,{key:n,button:!0,onClick:function(){return i(n)}},r.a.createElement(f.b,{className:o[g(n)]},n),r.a.createElement(f.j,{primary:a}),r.a.createElement(f.i,null,r.a.createElement(b.a,{color:"inherit"})))})}}]),t}(a.PureComponent),E=Object(d.withStyles)(function(e){return Object(m.a)({list:{margin:"auto",marginTop:16,width:"100%",maxWidth:360,backgroundColor:e.palette.background.paper},paper:{margin:16}},y)})(v),O=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleChangeFirstInput=function(e){n.setState({firstValue:e.target.value})},n.handleChangeSecondInput=function(e){n.setState({secondValue:e.target.value})},n.handleChangeFirstType=function(e){n.setState({firstType:e.target.value})},n.handleChangeSecondType=function(e){n.setState({secondType:e.target.value})},n.state={firstValue:1,firstType:"",secondValue:1,secondType:""},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setState({firstType:this.props.currencies[0],secondType:this.props.currencies[0]})}},{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(f.m,{elevation:1,className:e.paper},r.a.createElement(f.e,{container:!0,justify:"space-around",alignItems:"center",spacing:16},r.a.createElement(f.e,{item:!0,xs:12,container:!0,justify:"center"},r.a.createElement(f.o,{component:"h3",variant:"h3",align:"center"},"Currency calculator")),r.a.createElement(f.e,{item:!0,xs:12,sm:"auto",container:!0,justify:"center"},r.a.createElement(f.f,{className:e.input,type:"number",inputProps:{name:"first-amount",id:"first-amount",min:"0",step:"1"},value:this.state.firstValue,onChange:this.handleChangeFirstInput}),r.a.createElement(f.n,{className:e.input,native:!0,inputProps:{name:"first-currency",id:"first-currency"},onChange:this.handleChangeFirstType},this.currencyOptions)),r.a.createElement(f.e,{item:!0,xs:12,sm:"auto",container:!0,justify:"center"},r.a.createElement(f.f,{className:e.input,type:"number",inputProps:{name:"second-amount",id:"second-amount",min:"0",step:"1"},value:this.state.secondValue,onChange:this.handleChangeSecondInput}),r.a.createElement(f.n,{className:e.input,native:!0,inputProps:{name:"second-currency",id:"second-currency"},onChange:this.handleChangeSecondType},this.currencyOptions))))}},{key:"currencyOptions",get:function(){return this.props.currencies.map(function(e){return r.a.createElement("option",{key:e,value:e},e)})}}]),t}(a.PureComponent),j=Object(d.withStyles)(function(){return{paper:{margin:16},input:{margin:8}}})(O),C=n(5565),k=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleClick=function(e){n.setState({anchorEl:e.currentTarget})},n.handleClose=function(e){n.setState({anchorEl:null}),n.props.onBaseChange(e)},n.handleToHome=function(){n.props.history.push("/")},n.handleToCalculator=function(){n.props.history.push("calculator")},n.state={anchorEl:null},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.location,c=t.base,o=this.state.anchorEl,i=-1!==a.pathname.indexOf("calculator");return r.a.createElement(f.a,{className:n.root,position:"static",color:"default"},r.a.createElement(f.e,{container:!0,justify:"flex-end",alignItems:"center",spacing:16},r.a.createElement(f.e,{item:!0,xs:12,sm:"auto"},r.a.createElement(f.c,{disabled:i,fullWidth:!0,color:"secondary",variant:"outlined","aria-owns":o?"simple-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},"Base Currency: ",c),r.a.createElement(f.k,{id:"simple-menu",anchorEl:o,open:Boolean(o),onClose:function(){return e.handleClose(c)}},this.menuItems)),r.a.createElement(f.e,{item:!0,xs:12,sm:"auto"},r.a.createElement(f.c,{fullWidth:!0,color:i?"default":"primary",variant:i?"outlined":"contained",onClick:this.handleToHome},"Exchange rates")),r.a.createElement(f.e,{item:!0,xs:12,sm:"auto"},r.a.createElement(f.c,{fullWidth:!0,color:i?"primary":"default",variant:i?"contained":"outlined",onClick:this.handleToCalculator},"Exchange calculator"))))}},{key:"menuItems",get:function(){var e=this;return this.props.currencies.map(function(t){return r.a.createElement(f.l,{key:t,onClick:function(){return e.handleClose(t)}},t)})}}]),t}(a.PureComponent),F=Object(C.a)(Object(d.withStyles)(function(){return{root:{padding:8}}})(k)),T=n(5564),S=n(5563),x=n(48),R=n(46),w="RATES_LOAD",N="FAILURE",I="BASE_CURRENCY_SET",B="FAVORITE_TOGGLE",P="https://ratesapi.io/api/latest?base=".concat("GBP"),A=function(e){return parseFloat(e.toFixed(4),10)},V=function(){try{var e=localStorage.getItem("settings");if(null===e)return;return JSON.parse(e)}catch(t){return}},D=function(e){try{var t=JSON.stringify(e);localStorage.setItem("settings",t)}catch(n){throw new Error(n)}},G={base:"GBP",initialRates:{},rates:{},favorites:[],error:null};Object.assign(G,V());var W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(m.a)({},e,{base:"GBP",rates:t.payload.rates,initialRates:Object(m.a)(Object(R.a)({},"GBP",1),t.payload.rates)});case I:if(t.payload.base===e.base)return e;var n=t.payload.base,a=Object.assign({},e.initialRates),r=1/e.initialRates[n];return delete a[n],Object.getOwnPropertyNames(a).forEach(function(t){return a[t]=A(e.initialRates[t]*r)}),a[e.base]=A(e.initialRates[e.base]*r),Object(m.a)({},e,{rates:a,base:n});case B:var c=e.favorites.slice(),o=c.indexOf(t.payload.currencyName);return-1!==o?c.splice(o,1):c.push(t.payload.currencyName),Object(m.a)({},e,{favorites:c});case N:return Object(m.a)({},e,{error:t.payload.error});default:return e}},J=n(78),_=n.n(J),L=n(131),M=function(e){return{type:w,payload:{rates:e}}},H=function(e){return{type:N,payload:{error:e}}},U=function(e){return{type:I,payload:{base:e}}},Y=function(e){return{type:B,payload:{currencyName:e}}},q=function(){return function(){var e=Object(L.a)(_.a.mark(function e(t){var n,a;return _.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(P);case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t(M(a.rates)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(H(e.t0));case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()},z=function(e){return function(t){t(U(e))}},K=function(e){return function(t){t(Y(e))}},Q=function(e){return[e.base].concat(Object(h.a)(Object.keys(e.rates)))},X=function(e){var t={};return e.favorites.forEach(function(n){e.base===n||(t[n]=e.rates[n])}),t},Z=function(e){var t={};return Object.keys(e.rates).forEach(function(n){var a=-1!==e.favorites.indexOf(n),r=e.base===n;a||r||(t[n]=e.rates[n])}),t},$=W,ee=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getRates()}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.currencies,c=e.setBase,o={favoriteRates:e.favoriteRates,notFavoriteRates:e.notFavoriteRates,onToggleFavorite:e.toggleFavorite},i={currencies:n};return r.a.createElement(T.a,{basename:"/currency-exchange"},r.a.createElement(a.Fragment,null,r.a.createElement(f.d,null),r.a.createElement(F,{base:t,currencies:n,onBaseChange:c}),r.a.createElement(S.a,{path:"/",exact:!0,render:function(){return r.a.createElement(E,o)}}),r.a.createElement(S.a,{path:"/calculator",render:function(){return r.a.createElement(j,i)}})))}}]),t}(a.Component),te=Object(x.b)(function(e){return{base:e.base,favoriteRates:X(e),notFavoriteRates:Z(e),currencies:Q(e)}},function(e){return{getRates:function(){return e(q())},setBase:function(t){return e(z(t))},toggleFavorite:function(t){return e(K(t))}}})(ee),ne=n(31),ae=n(132),re=n(133),ce=Object(ne.applyMiddleware)(ae.a),oe=Object(ne.createStore)($,Object(re.composeWithDevTools)(ce));oe.subscribe(function(){D({favorites:oe.getState().favorites})}),o.a.render(r.a.createElement(x.a,{store:oe},r.a.createElement(te,null)),document.getElementById("root"))}},[[5433,1,2]]]);
//# sourceMappingURL=main.f5e7c3b5.chunk.js.map