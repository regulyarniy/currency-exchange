(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{213:function(e,t,a){e.exports=a(342)},342:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),i=a(30),s=a(31),u=a(42),l=a(32),f=a(43),p=a(16),h=a(19),m=a(345),d=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(l.a)(t).call(this,e))).handleClick=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(e){a.setState({anchorEl:null}),a.props.onBaseChange(e)},a.handleToHome=function(){a.props.history.push("/")},a.handleToCalculator=function(){a.props.history.push("calculator")},a.state={anchorEl:null},a}return Object(f.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.location,c=t.base,o=this.state.anchorEl,i=-1!==n.pathname.indexOf("calculator");return r.a.createElement(p.a,{className:a.root,position:"static",color:"default"},r.a.createElement(p.f,{container:!0,justify:"flex-end",alignItems:"center",spacing:16},r.a.createElement(p.f,{item:!0,xs:12,sm:"auto"},r.a.createElement(p.c,{disabled:i,fullWidth:!0,color:"secondary",variant:"outlined","aria-owns":o?"simple-menu":void 0,"aria-haspopup":"true",onClick:this.handleClick},"Base Currency: ",c),r.a.createElement(p.l,{id:"simple-menu",anchorEl:o,open:Boolean(o),onClose:function(){return e.handleClose(c)}},this.menuItems)),r.a.createElement(p.f,{item:!0,xs:12,sm:"auto"},r.a.createElement(p.c,{fullWidth:!0,color:i?"default":"primary",variant:i?"outlined":"contained",onClick:this.handleToHome},"Exchange rates")),r.a.createElement(p.f,{item:!0,xs:12,sm:"auto"},r.a.createElement(p.c,{fullWidth:!0,color:i?"primary":"default",variant:i?"contained":"outlined",onClick:this.handleToCalculator},"Exchange calculator"))))}},{key:"menuItems",get:function(){var e=this;return this.props.currencies.map(function(t){return r.a.createElement(p.m,{key:t,onClick:function(){return e.handleClose(t)}},t)})}}]),t}(n.PureComponent),b=Object(m.a)(Object(h.withStyles)(function(){return{root:{padding:8}}})(d)),y=a(344),v=a(343),E=a(47),O=a(46),g=a(26),j="RATES_LOAD",R="FAILURE",C="BASE_CURRENCY_SET",k="FAVORITE_TOGGLE",x="https://api.ratesapi.io/api/latest?base=".concat("GBP"),w=function(e){return parseFloat(e.toFixed(4),10)},S=function(){try{var e=localStorage.getItem("settings");if(null===e)return;return JSON.parse(e)}catch(t){return}},B=function(e){try{var t=JSON.stringify(e);localStorage.setItem("settings",t)}catch(a){throw new Error(a)}},T={base:"GBP",initialRates:{},rates:{},favorites:[],error:null};Object.assign(T,S());var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(g.a)({},e,{base:"GBP",rates:t.payload.rates,initialRates:Object(g.a)(Object(O.a)({},"GBP",1),t.payload.rates)});case C:if(t.payload.base===e.base)return e;var a=t.payload.base,n=Object.assign({},e.initialRates),r=1/e.initialRates[a];return delete n[a],Object.getOwnPropertyNames(n).forEach(function(t){return n[t]=w(e.initialRates[t]*r)}),n[e.base]=w(e.initialRates[e.base]*r),Object(g.a)({},e,{rates:n,base:a});case k:var c=e.favorites.slice(),o=c.indexOf(t.payload.currencyName);return-1!==o?c.splice(o,1):c.push(t.payload.currencyName),Object(g.a)({},e,{favorites:c});case R:return Object(g.a)({},e,{error:t.payload.error});default:return e}},N=a(76),I=a.n(N),P=a(129),G=function(e){return{type:j,payload:{rates:e}}},A=function(e){return{type:R,payload:{error:e}}},J=function(e){return{type:C,payload:{base:e}}},W=function(e){return{type:k,payload:{currencyName:e}}},_=function(){return function(){var e=Object(P.a)(I.a.mark(function e(t){var a,n;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(x);case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t(G(n.rates)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),t(A(e.t0));case 13:case"end":return e.stop()}},e,this,[[0,10]])}));return function(t){return e.apply(this,arguments)}}()},D=function(e){return function(t){t(J(e))}},L=function(e){return function(t){t(W(e))}},z=a(124),H=function(e){return[e.base].concat(Object(z.a)(Object.keys(e.rates)))},M=function(e){var t={};return e.favorites.forEach(function(a){e.base===a||(t[a]=e.rates[a])}),t},U=function(e){var t={};return Object.keys(e.rates).forEach(function(a){var n=-1!==e.favorites.indexOf(a),r=e.base===a;n||r||(t[a]=e.rates[a])}),t},V=F,Y=Object(h.withStyles)(function(e){return{progress:{margin:2*e.spacing.unit}}})(function(e){var t=e.classes;return r.a.createElement(p.f,{container:!0,justify:"center"},r.a.createElement(p.d,{className:t.progress,color:"primary"}))}),q=Object(n.lazy)(function(){return Promise.all([a.e(3),a.e(5)]).then(a.bind(null,5567))}),K=Object(n.lazy)(function(){return a.e(4).then(a.bind(null,5568))}),Q=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.getRates()}},{key:"render",value:function(){var e=this.props,t=e.base,a=e.currencies,c=e.setBase,o=e.favoriteRates,i=e.notFavoriteRates,s=e.toggleFavorite,u=e.initialRates,l={favoriteRates:o,notFavoriteRates:i,onToggleFavorite:s},f={currencies:a,initialRates:u};return r.a.createElement(y.a,{basename:"/currency-exchange"},r.a.createElement(n.Suspense,{fallback:r.a.createElement(Y,null)},r.a.createElement(p.e,null),r.a.createElement(b,{base:t,currencies:a,onBaseChange:c}),r.a.createElement(v.a,{path:"/",exact:!0,render:function(){return r.a.createElement(q,l)}}),r.a.createElement(v.a,{path:"/calculator",render:function(){return r.a.createElement(K,f)}})))}}]),t}(n.Component),X=Object(E.b)(function(e){return{base:e.base,favoriteRates:M(e),notFavoriteRates:U(e),currencies:H(e),initialRates:e.initialRates}},function(e){return{getRates:function(){return e(_())},setBase:function(t){return e(D(t))},toggleFavorite:function(t){return e(L(t))}}})(Q),Z=a(25),$=a(130),ee=a(131),te=Object(Z.applyMiddleware)($.a),ae=Object(Z.createStore)(V,Object(ee.composeWithDevTools)(te));ae.subscribe(function(){B({favorites:ae.getState().favorites})}),o.a.render(r.a.createElement(E.a,{store:ae},r.a.createElement(X,null)),document.getElementById("root"))}},[[213,1,2]]]);
//# sourceMappingURL=main.b4e573c0.chunk.js.map